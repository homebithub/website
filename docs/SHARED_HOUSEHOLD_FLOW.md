# Shared Household - User Flow Diagram

## ðŸ“Š Complete User Journey

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER SIGNS UP                                â”‚
â”‚                    (Selects "Household")                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   HOUSEHOLD SETUP PAGE                               â”‚
â”‚                   (/household/setup)                                 â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  "Do you have a household invite code?"                      â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  [Input: HH-____-____]  [Validate Code]                     â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ OR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                          â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  [Create New Household]                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                              â”‚
    Has Code â”‚                              â”‚ No Code
             â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   VALIDATE INVITE CODE   â”‚    â”‚   CREATE NEW HOUSEHOLD   â”‚
â”‚                          â”‚    â”‚                          â”‚
â”‚  â€¢ Check if valid        â”‚    â”‚  â€¢ Complete onboarding   â”‚
â”‚  â€¢ Check if expired      â”‚    â”‚  â€¢ Become owner          â”‚
â”‚  â€¢ Show household name   â”‚    â”‚  â€¢ Get full permissions  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                               â”‚
             â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SEND JOIN REQUEST      â”‚    â”‚   HOUSEHOLD PROFILE      â”‚
â”‚                          â”‚    â”‚                          â”‚
â”‚  â€¢ Create request        â”‚    â”‚  â€¢ Manage profile        â”‚
â”‚  â€¢ Add optional message  â”‚    â”‚  â€¢ Hire househelps       â”‚
â”‚  â€¢ Wait for approval     â”‚    â”‚  â€¢ Invite members        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PENDING APPROVAL       â”‚
â”‚                          â”‚
â”‚  â€¢ Show "Request Sent"   â”‚
â”‚  â€¢ Notify owner          â”‚
â”‚  â€¢ Wait for response     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   OWNER REVIEWS REQUEST                  â”‚
â”‚   (/household/members)                   â”‚
â”‚                                          â”‚
â”‚  â€¢ See requester details                 â”‚
â”‚  â€¢ Read message                          â”‚
â”‚  â€¢ Approve or Reject                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
      â”‚             â”‚
  Approved      Rejected
      â”‚             â”‚
      â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MEMBER   â”‚  â”‚ REJECTED â”‚
â”‚ CREATED  â”‚  â”‚ NOTIFIED â”‚
â”‚          â”‚  â”‚          â”‚
â”‚ â€¢ Active â”‚  â”‚ â€¢ Can    â”‚
â”‚ â€¢ Access â”‚  â”‚   retry  â”‚
â”‚   grantedâ”‚  â”‚   later  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   HOUSEHOLD PROFILE      â”‚
â”‚                          â”‚
â”‚  â€¢ View household data   â”‚
â”‚  â€¢ Manage househelps     â”‚
â”‚  â€¢ Collaborate with      â”‚
â”‚    other members         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”„ Invite Code Lifecycle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OWNER GENERATES CODE                      â”‚
â”‚                                                              â”‚
â”‚  POST /api/v1/households/:id/invitations                    â”‚
â”‚  {                                                           â”‚
â”‚    "role": "member",                                         â”‚
â”‚    "expires_in_days": 7,                                     â”‚
â”‚    "max_uses": 1                                             â”‚
â”‚  }                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  CODE CREATED  â”‚
                    â”‚  HH-ABCD-EFGH  â”‚
                    â”‚                â”‚
                    â”‚  Status: pendingâ”‚
                    â”‚  Uses: 0/1     â”‚
                    â”‚  Expires: 7d   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                 â”‚
              Shared with         Not used
              family member       (expires)
                    â”‚                 â”‚
                    â–¼                 â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  CODE USED    â”‚  â”‚   EXPIRED   â”‚
            â”‚               â”‚  â”‚             â”‚
            â”‚  Uses: 1/1    â”‚  â”‚  Status:    â”‚
            â”‚  Status:      â”‚  â”‚  expired    â”‚
            â”‚  accepted     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ‘¥ Member Roles & Permissions Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Permission           â”‚ Owner â”‚ Admin â”‚ Member â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Edit Profile         â”‚   âœ…  â”‚   âœ…  â”‚   âŒ   â”‚
â”‚ Manage Househelps    â”‚   âœ…  â”‚   âœ…  â”‚   âœ…   â”‚
â”‚ View Financials      â”‚   âœ…  â”‚   âœ…  â”‚   âŒ   â”‚
â”‚ Invite Members       â”‚   âœ…  â”‚   âœ…  â”‚   âŒ   â”‚
â”‚ Remove Members       â”‚   âœ…  â”‚   âŒ  â”‚   âŒ   â”‚
â”‚ Transfer Ownership   â”‚   âœ…  â”‚   âŒ  â”‚   âŒ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ—„ï¸ Database Schema Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  household_profiles     â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  id (PK)                â”‚
â”‚  owner_user_id (FK)     â”‚â—„â”€â”€â”€â”€â”€â”
â”‚  is_shared              â”‚      â”‚
â”‚  member_count           â”‚      â”‚
â”‚  max_members            â”‚      â”‚
â”‚  household_name         â”‚      â”‚
â”‚  ... (other fields)     â”‚      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
             â”‚                   â”‚
             â”‚ 1:N               â”‚
             â–¼                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  household_members      â”‚      â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚      â”‚
â”‚  id (PK)                â”‚      â”‚
â”‚  household_id (FK)      â”‚â”€â”€â”€â”€â”€â”€â”˜
â”‚  user_id (FK)           â”‚â”€â”€â”€â”€â”€â”€â”
â”‚  role                   â”‚      â”‚
â”‚  status                 â”‚      â”‚
â”‚  permissions (JSONB)    â”‚      â”‚
â”‚  invited_by (FK)        â”‚      â”‚
â”‚  joined_at              â”‚      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
             â”‚                   â”‚
             â”‚ N:1               â”‚
             â–¼                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  users                  â”‚      â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚      â”‚
â”‚  id (PK)                â”‚â—„â”€â”€â”€â”€â”€â”˜
â”‚  first_name             â”‚
â”‚  last_name              â”‚
â”‚  phone                  â”‚
â”‚  email                  â”‚
â”‚  ... (other fields)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  household_invitations  â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  id (PK)                â”‚
â”‚  household_id (FK)      â”‚
â”‚  invite_code (UNIQUE)   â”‚
â”‚  invited_by (FK)        â”‚
â”‚  role                   â”‚
â”‚  status                 â”‚
â”‚  max_uses               â”‚
â”‚  uses_count             â”‚
â”‚  expires_at             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  household_member_       â”‚
â”‚  requests                â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  id (PK)                 â”‚
â”‚  household_id (FK)       â”‚
â”‚  user_id (FK)            â”‚
â”‚  invitation_id (FK)      â”‚
â”‚  status                  â”‚
â”‚  message                 â”‚
â”‚  reviewed_by (FK)        â”‚
â”‚  reviewed_at             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸŽ¨ UI Screenshots (Conceptual)

### 1. Household Setup Page
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Join or Create Household              â”‚
â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Join Existing Household        â”‚   â”‚
â”‚  â”‚                                â”‚   â”‚
â”‚  â”‚ Enter Invite Code:             â”‚   â”‚
â”‚  â”‚ [HH-____-____]  [Validate]    â”‚   â”‚
â”‚  â”‚                                â”‚   â”‚
â”‚  â”‚ âœ… Valid! Household: Smith's   â”‚   â”‚
â”‚  â”‚    [Join This Household]       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                        â”‚
â”‚           â”€â”€â”€ OR â”€â”€â”€                   â”‚
â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Create New Household           â”‚   â”‚
â”‚  â”‚                                â”‚   â”‚
â”‚  â”‚ [ðŸ  Create New Household]      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Members Management Page
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Household Members                     â”‚
â”‚                                        â”‚
â”‚  [+ Invite Family Member]              â”‚
â”‚                                        â”‚
â”‚  â³ Pending Requests (1)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ðŸ‘¤ Jane Doe                    â”‚   â”‚
â”‚  â”‚    0712345678                  â”‚   â”‚
â”‚  â”‚    "Hi, I'm your spouse!"      â”‚   â”‚
â”‚  â”‚    [âœ… Approve] [âŒ Reject]     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                        â”‚
â”‚  ðŸ‘¥ Active Members (2)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ðŸ‘¤ John Smith      [OWNER]     â”‚   â”‚
â”‚  â”‚    john@email.com              â”‚   â”‚
â”‚  â”‚    Joined: Jan 1, 2025         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ðŸ‘¤ Jane Doe       [MEMBER]     â”‚   â”‚
â”‚  â”‚    jane@email.com              â”‚   â”‚
â”‚  â”‚    Joined: Jan 5, 2025         â”‚   â”‚
â”‚  â”‚    [Change Role] [Remove]      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Invite Code Generator
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Invite Family Member                  â”‚
â”‚                                        â”‚
â”‚  Member Role:                          â”‚
â”‚  [â—] Member  [ ] Admin                 â”‚
â”‚                                        â”‚
â”‚  Expires In: [7 days â–¼]                â”‚
â”‚  Max Uses: [1 person â–¼]                â”‚
â”‚                                        â”‚
â”‚  [âœ¨ Generate Invite Code]             â”‚
â”‚                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                        â”‚
â”‚  ðŸŽ‰ Invite Code Generated!             â”‚
â”‚                                        â”‚
â”‚     HH-ABCD-EFGH  [ðŸ“‹ Copy]            â”‚
â”‚                                        â”‚
â”‚  Expires: Oct 16, 2025                 â”‚
â”‚  Max Uses: 1                           â”‚
â”‚                                        â”‚
â”‚  ðŸ’¡ Share this code via SMS or email   â”‚
â”‚                                        â”‚
â”‚  [Generate Another] [Done]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”„ State Transitions

### Member Status Flow
```
pending â”€â”€approveâ”€â”€> active â”€â”€removeâ”€â”€> removed
   â”‚                                        â–²
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€rejectâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Invitation Status Flow
```
pending â”€â”€useâ”€â”€> accepted
   â”‚
   â”œâ”€â”€expireâ”€â”€> expired
   â”‚
   â””â”€â”€revokeâ”€â”€> revoked
```

### Request Status Flow
```
pending â”€â”€approveâ”€â”€> approved
   â”‚
   â””â”€â”€rejectâ”€â”€> rejected
```

---

## ðŸŽ¯ API Call Sequence

### Scenario: Parent B Joins Parent A's Household

```
1. Parent A: Create Invitation
   POST /api/v1/households/{id}/invitations
   â†’ Returns: { invite_code: "HH-ABCD-EFGH" }

2. Parent B: Validate Code
   GET /api/v1/households/invitations/validate/HH-ABCD-EFGH
   â†’ Returns: { valid: true, household_name: "Smith Family" }

3. Parent B: Join Household
   POST /api/v1/households/join
   { invite_code: "HH-ABCD-EFGH", message: "Hi!" }
   â†’ Returns: { request_id: "...", status: "pending" }

4. Parent A: List Requests
   GET /api/v1/households/{id}/requests
   â†’ Returns: [{ id: "...", user: {...}, message: "Hi!" }]

5. Parent A: Approve Request
   POST /api/v1/households/{id}/requests/{req_id}/approve
   â†’ Returns: { message: "Request approved" }

6. Parent B: Access Household
   GET /api/v1/households/{id}/members
   â†’ Returns: [{ user_id: "...", role: "member", status: "active" }]
```

---

## ðŸ“± Component Hierarchy

```
App
â”œâ”€â”€ Routes
â”‚   â”œâ”€â”€ /signup
â”‚   â”‚   â””â”€â”€ Redirects to /household/setup (for household users)
â”‚   â”‚
â”‚   â”œâ”€â”€ /household/setup
â”‚   â”‚   â””â”€â”€ HouseholdCodePrompt
â”‚   â”‚       â”œâ”€â”€ Join Existing Section
â”‚   â”‚       â”‚   â”œâ”€â”€ Code Input (auto-format)
â”‚   â”‚       â”‚   â”œâ”€â”€ Validate Button
â”‚   â”‚       â”‚   â””â”€â”€ Join Button
â”‚   â”‚       â””â”€â”€ Create New Section
â”‚   â”‚           â””â”€â”€ Create Button
â”‚   â”‚
â”‚   â””â”€â”€ /household/members
â”‚       â”œâ”€â”€ InviteCodeGenerator (modal)
â”‚       â”‚   â”œâ”€â”€ Role Selection
â”‚       â”‚   â”œâ”€â”€ Expiry Selection
â”‚       â”‚   â”œâ”€â”€ Generate Button
â”‚       â”‚   â””â”€â”€ Code Display + Copy
â”‚       â”‚
â”‚       â”œâ”€â”€ Pending Requests Section
â”‚       â”‚   â””â”€â”€ Request Cards
â”‚       â”‚       â”œâ”€â”€ User Details
â”‚       â”‚       â”œâ”€â”€ Message
â”‚       â”‚       â”œâ”€â”€ Approve Button
â”‚       â”‚       â””â”€â”€ Reject Button
â”‚       â”‚
â”‚       â””â”€â”€ Active Members Section
â”‚           â””â”€â”€ Member Cards
â”‚               â”œâ”€â”€ Avatar
â”‚               â”œâ”€â”€ User Info
â”‚               â”œâ”€â”€ Role Badge
â”‚               â”œâ”€â”€ Permissions
â”‚               â”œâ”€â”€ Change Role Button
â”‚               â””â”€â”€ Remove Button
â”‚
â””â”€â”€ Utils
    â””â”€â”€ householdApi.ts
        â”œâ”€â”€ Invitation Functions
        â”œâ”€â”€ Request Functions
        â””â”€â”€ Member Functions
```

---

## ðŸŽ¨ Design System

### Colors
```
Primary Purple:   #9333ea (primary-600)
Light Purple:     #a855f7 (purple-500)
Dark Purple:      #7e22ce (primary-700)
Pink Accent:      #ec4899 (pink-500)

Success Green:    #10b981 (green-500)
Warning Amber:    #f59e0b (amber-500)
Error Red:        #ef4444 (red-500)
Info Blue:        #3b82f6 (blue-500)
```

### Typography
```
Headings:  font-bold, gradient text
Labels:    font-semibold, primary-600
Body:      text-gray-600 dark:text-gray-300
Mono:      font-mono (for invite codes)
```

### Spacing
```
Cards:     p-6 (24px padding)
Sections:  space-y-6 (24px gap)
Buttons:   px-6 py-3 (24px x 12px)
Inputs:    h-12 (48px height)
```

---

## ðŸš€ Quick Start Commands

### Backend
```bash
cd auth

# Apply migration
psql -U user -d db -f migrations/000_add_shared_households.sql

# Build and run
go build -o bin/auth ./src/cmd/main.go
./bin/auth
```

### Frontend
```bash
cd website

# Install and run
npm install
npm run dev

# Test pages:
# http://localhost:5173/signup
# http://localhost:5173/household/setup
# http://localhost:5173/household/members
```

---

## ðŸ“Š Success Metrics

### Week 1
- [ ] 10+ shared households created
- [ ] 20+ invite codes generated
- [ ] 15+ members approved
- [ ] 0 critical errors

### Month 1
- [ ] 50+ shared households
- [ ] 80% approval rate
- [ ] <5% error rate
- [ ] Positive user feedback

### Quarter 1
- [ ] 200+ shared households
- [ ] 2.5 avg members per household
- [ ] Feature used by 30% of households
- [ ] 4.5+ star rating

---

## ðŸŽŠ Congratulations!

The shared household feature is **fully implemented** and **ready to deploy**!

**Total Deliverables:**
- âœ… 19 files created
- âœ… ~5,700 lines of code
- âœ… 14 API endpoints
- âœ… 2 reusable components
- âœ… 2 new pages
- âœ… Complete documentation

**Next Step:** Deploy using `SHARED_HOUSEHOLD_DEPLOYMENT.md`

**Happy Deploying! ðŸš€**
